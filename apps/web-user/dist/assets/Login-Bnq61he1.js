import{d as x,r as m,c as w,a as d,b as t,w as l,u as o,e as i,f as b,g as h,o as y}from"./index-py7iog5D.js";import{u as N,N as I,a as p,b as c,B as S,l as B}from"./auth-Crhm4mYv.js";const C=x("auth",{state:()=>({token:localStorage.getItem("user_token")||"",user:null}),getters:{isLoggedIn:a=>!!a.token},actions:{setToken(a){this.token=a,localStorage.setItem("user_token",a)},logout(){this.token="",this.user=null,localStorage.removeItem("user_token")}}}),L={class:"min-h-screen flex items-center justify-center bg-gray-50 p-4"},T={class:"bg-white p-6 rounded shadow-md w-full max-w-sm"},V={class:"mt-4 text-center text-sm"},j={__name:"Login",setup(a){const f=h(),g=N(),v=C(),n=m(!1),s=m({username:"",password:""}),k=async()=>{n.value=!0;try{const r=await B(s.value);v.setToken(r.token),f.push("/")}catch{g.error("登录失败")}finally{n.value=!1}};return(r,e)=>{const _=b("router-link");return y(),w("div",L,[d("div",T,[e[5]||(e[5]=d("h1",{class:"text-xl font-bold mb-4 text-center"},"登录",-1)),t(o(I),{model:s.value},{default:l(()=>[t(o(p),{label:"用户名"},{default:l(()=>[t(o(c),{value:s.value.username,"onUpdate:value":e[0]||(e[0]=u=>s.value.username=u),placeholder:"请输入用户名"},null,8,["value"])]),_:1}),t(o(p),{label:"密码"},{default:l(()=>[t(o(c),{value:s.value.password,"onUpdate:value":e[1]||(e[1]=u=>s.value.password=u),type:"password",placeholder:"请输入密码"},null,8,["value"])]),_:1}),t(o(S),{type:"primary",block:"",onClick:k,loading:n.value},{default:l(()=>[...e[2]||(e[2]=[i("登录",-1)])]),_:1},8,["loading"])]),_:1},8,["model"]),d("p",V,[e[4]||(e[4]=i(" 没有账号？",-1)),t(_,{to:"/register",class:"text-blue-500"},{default:l(()=>[...e[3]||(e[3]=[i("去注册",-1)])]),_:1})])])])}}};export{j as default};
