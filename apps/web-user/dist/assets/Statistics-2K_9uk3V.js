import{h as g}from"./http-phmH1L-C.js";import{r as x,q as c,l as w,c as n,a as t,F as p,aK as _,aL as l,a_ as u,o as d}from"./index-B2dGlvo9.js";const S=(i=7)=>g.get("/statistics/bill",{params:{days:i}}),k=(i=7)=>g.get("/statistics/smoking",{params:{days:i}}),M=()=>g.get("/statistics/schedule"),B={class:"min-h-screen bg-gray-50 p-4"},N={class:"bg-white p-4 rounded mb-4"},D={class:"text-sm text-gray-600"},E={class:"flex gap-2 items-center"},F={class:"w-16 text-xs text-green-600"},L={class:"flex-1 h-2 bg-green-200 rounded"},j={class:"flex gap-2 items-center"},q={class:"w-16 text-xs text-red-600"},z={class:"flex-1 h-2 bg-red-200 rounded"},I={class:"bg-white p-4 rounded mb-4"},K={class:"w-24 text-sm text-gray-600"},P={class:"flex-1 h-4 bg-gray-200 rounded"},R={class:"w-8 text-sm"},V={class:"bg-white p-4 rounded"},W={class:"flex justify-around text-center"},A={class:"text-2xl font-bold text-blue-600"},C={class:"text-2xl font-bold text-green-600"},G={class:"text-2xl font-bold text-yellow-600"},H={class:"mt-3 h-4 bg-gray-200 rounded overflow-hidden"},J={class:"text-center text-sm text-gray-500 mt-1"},U={__name:"Statistics",setup(i){const r=x([]),m=x([]),a=x({total:0,completed:0,pending:0}),b=c(()=>Math.max(...r.value.map(o=>Number(o.income)||0),1)),f=c(()=>Math.max(...r.value.map(o=>Number(o.expense)||0),1)),y=c(()=>Math.max(...m.value.map(o=>o.count||0),1)),h=c(()=>a.value.total===0?"0%":Math.round(a.value.completed/a.value.total*100)+"%"),v=(o,s)=>!o||!s?"0%":Math.round(Number(o)/s*100)+"%";return w(async()=>{const[o,s,e]=await Promise.all([S(),k(),M()]);r.value=o||[],m.value=s||[],a.value=e||{total:0,completed:0,pending:0}}),(o,s)=>(d(),n("div",B,[s[6]||(s[6]=t("h1",{class:"text-xl font-bold mb-4"},"统计",-1)),t("div",N,[s[0]||(s[0]=t("h2",{class:"font-bold mb-3"},"消费统计 (近7天)",-1)),(d(!0),n(p,null,_(r.value,e=>(d(),n("div",{key:e.period,class:"mb-2"},[t("div",D,l(e.period),1),t("div",E,[t("div",F,"+"+l(e.income),1),t("div",L,[t("div",{class:"h-2 bg-green-500 rounded",style:u({width:v(e.income,b.value)})},null,4)])]),t("div",j,[t("div",q,"-"+l(e.expense),1),t("div",z,[t("div",{class:"h-2 bg-red-500 rounded",style:u({width:v(e.expense,f.value)})},null,4)])])]))),128))]),t("div",I,[s[1]||(s[1]=t("h2",{class:"font-bold mb-3"},"抽烟统计 (近7天)",-1)),(d(!0),n(p,null,_(m.value,e=>(d(),n("div",{key:e.period,class:"mb-2 flex items-center gap-2"},[t("div",K,l(e.period),1),t("div",P,[t("div",{class:"h-4 bg-orange-500 rounded",style:u({width:v(e.count,y.value)})},null,4)]),t("div",R,l(e.count),1)]))),128))]),t("div",V,[s[5]||(s[5]=t("h2",{class:"font-bold mb-3"},"日程完成率",-1)),t("div",W,[t("div",null,[t("div",A,l(a.value.total),1),s[2]||(s[2]=t("div",{class:"text-sm text-gray-500"},"总计",-1))]),t("div",null,[t("div",C,l(a.value.completed),1),s[3]||(s[3]=t("div",{class:"text-sm text-gray-500"},"已完成",-1))]),t("div",null,[t("div",G,l(a.value.pending),1),s[4]||(s[4]=t("div",{class:"text-sm text-gray-500"},"待办",-1))])]),t("div",H,[t("div",{class:"h-4 bg-green-500",style:u({width:h.value})},null,4)]),t("div",J,"完成率: "+l(h.value),1)])]))}};export{U as default};
